{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"../_services/storage.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_form_2_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"* User Name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_2_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"* User Name must be in Alphabets\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_2_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, LoginComponent_form_2_div_15_div_1_Template, 2, 0, \"div\", 16);\n    i0.ɵɵtemplate(2, LoginComponent_form_2_div_15_div_2_Template, 2, 0, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r3 = i0.ɵɵreference(14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors[\"pattern\"]);\n  }\n}\nfunction LoginComponent_form_2_div_26_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"* Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_2_div_26_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"* Password must be at least 6 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_2_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, LoginComponent_form_2_div_26_div_1_Template, 2, 0, \"div\", 16);\n    i0.ɵɵtemplate(2, LoginComponent_form_2_div_26_div_2_Template, 2, 0, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r5 = i0.ɵɵreference(25);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors[\"minlength\"]);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nfunction LoginComponent_form_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 2, 3);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_2_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const _r2 = i0.ɵɵreference(1);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(_r2.form.valid && ctx_r11.onLogin());\n    });\n    i0.ɵɵelementStart(2, \"h2\")(3, \"i\", 4);\n    i0.ɵɵtext(4, \"\\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" Login Form\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 5)(7, \"i\", 4);\n    i0.ɵɵtext(8, \"\\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"label\", 6);\n    i0.ɵɵtext(10, \"UserName \");\n    i0.ɵɵelementStart(11, \"small\");\n    i0.ɵɵtext(12, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"input\", 7, 8);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_2_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.userlogin.username = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, LoginComponent_form_2_div_15_Template, 3, 2, \"div\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵelementStart(17, \"div\", 5)(18, \"i\", 10);\n    i0.ɵɵtext(19, \"\\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"label\", 11);\n    i0.ɵɵtext(21, \"Password \");\n    i0.ɵɵelementStart(22, \"small\");\n    i0.ɵɵtext(23, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"input\", 12, 13);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_2_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.userlogin.password = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, LoginComponent_form_2_div_26_Template, 3, 2, \"div\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"br\")(28, \"br\");\n    i0.ɵɵelementStart(29, \"div\")(30, \"button\", 14);\n    i0.ɵɵtext(31, \"Login\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(1);\n    const _r3 = i0.ɵɵreference(14);\n    const _r5 = i0.ɵɵreference(25);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.userlogin.username)(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, _r2.submitted && _r3.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors && _r2.submitted);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.userlogin.password)(\"ngClass\", i0.ɵɵpureFunction1(8, _c0, _r2.submitted && _r5.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors && _r2.submitted);\n  }\n}\nfunction LoginComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Logged in Successful ! \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  constructor(authService, storageService, router) {\n    this.authService = authService;\n    this.storageService = storageService;\n    this.router = router;\n    this.userlogin = {\n      username: '',\n      password: ''\n    };\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.roles = [];\n  }\n  ngOnInit() {\n    if (this.storageService.getToken()) {\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n    }\n  }\n  //      onLogin(){\n  //       this.authService.login(this.userlogin).subscribe(data=>{\n  //         console.log(data);\n  //         this.router.navigate(['product']);\n  //       })\n  //     }\n  // }\n  onLogin() {\n    this.authService.login(this.userlogin).subscribe(\n    //(username, password).subscribe({\n    //(username, password).subscribe({\n    data => {\n      this.storageService.saveToken(data.accessToken);\n      this.storageService.saveUser(data);\n      this.isLoginFailed = false;\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n      this.reloadPage();\n    }, err => {\n      alert('Login Failed,Please provide valid credentials');\n      this.errorMessage = err.error.message;\n      this.isLoginFailed = true;\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.StorageService), i0.ɵɵdirectiveInject(i3.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 4,\n  vars: 2,\n  consts: [[\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"fa\", \"fa-user\", \"icon\"], [1, \"input-icons\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"id\", \"username\", \"placeholder\", \"Enter your name\", \"required\", \"\", \"pattern\", \"[a-zA-Z][a-zA-Z ]+\", 1, \"textboxs\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [1, \"fa\", \"fa-lock\", \"icon\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Enter your password\", \"required\", \"\", \"minlength\", \"6\", 1, \"textboxs\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"id\", \"btn1\", \"type\", \"submit\", 1, \"btn\", \"btn-success\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [1, \"alert\", \"alert-success\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"body\")(1, \"div\");\n      i0.ɵɵtemplate(2, LoginComponent_form_2_Template, 32, 10, \"form\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, LoginComponent_div_3_Template, 2, 0, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinLengthValidator, i5.PatternValidator, i5.NgModel, i5.NgForm],\n  styles: [\"h2[_ngcontent-%COMP%]{\\r\\n    text-align: center;\\r\\n  }\\r\\n  form[_ngcontent-%COMP%]{\\r\\n    background-color:#3bb83b; \\r\\n    padding: 20px;\\r\\n    margin : 50px auto ;\\r\\n    margin-top: 90px;\\r\\n    border-radius: 30px;\\r\\n    width: 400px;\\r\\n  }\\r\\n  .textboxs[_ngcontent-%COMP%]{\\r\\n    border-color: #AED6F1;\\r\\n    margin-top: 5px;\\r\\n    padding: 15px;\\r\\n    border-radius: 7px;\\r\\n    box-shadow: 20px;\\r\\n    display: block;\\r\\n    width: 90%;\\r\\n    height: 5px;\\r\\n  }\\r\\n  \\r\\n  input.ng-invalid.ng-touched[_ngcontent-%COMP%]{\\r\\n    border: 2px solid red;\\r\\n  }\\r\\n  small[_ngcontent-%COMP%]{\\r\\n    color: red;\\r\\n  }\\r\\n  #btn1[_ngcontent-%COMP%]{\\r\\n    border-radius: 4px;\\r\\n    width: 100%;\\r\\n    padding: 10px;\\r\\n    background-color: blue;\\r\\n  }\\r\\n  \\r\\n  body[_ngcontent-%COMP%]{\\r\\n    margin: auto;\\r\\n  }\\r\\n  .alert[_ngcontent-%COMP%]{\\r\\n    margin-top: 50px;\\r\\n    margin-left: 350px;\\r\\n    width: 500px;\\r\\n    height: 100px;\\r\\n    padding: 90px,0px; \\r\\n    text-align: center;\\r\\n  }\\r\\n  #btn2[_ngcontent-%COMP%]{\\r\\n    margin-left: 350px;\\r\\n    \\r\\n  \\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGtCQUFrQjtFQUNwQjtFQUNBO0lBQ0Usd0JBQXdCO0lBQ3hCLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLG1CQUFtQjtJQUNuQixZQUFZO0VBQ2Q7RUFDQTtJQUNFLHFCQUFxQjtJQUNyQixlQUFlO0lBQ2YsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLFVBQVU7SUFDVixXQUFXO0VBQ2I7O0VBRUE7SUFDRSxxQkFBcUI7RUFDdkI7RUFDQTtJQUNFLFVBQVU7RUFDWjtFQUNBO0lBQ0Usa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxhQUFhO0lBQ2Isc0JBQXNCO0VBQ3hCOztFQUVBO0lBQ0UsWUFBWTtFQUNkO0VBQ0E7SUFDRSxnQkFBZ0I7SUFDaEIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLGtCQUFrQjtFQUNwQjtFQUNBO0lBQ0Usa0JBQWtCOzs7RUFHcEIiLCJzb3VyY2VzQ29udGVudCI6WyJoMntcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB9XHJcbiAgZm9ybXtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IzNiYjgzYjsgXHJcbiAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgbWFyZ2luIDogNTBweCBhdXRvIDtcclxuICAgIG1hcmdpbi10b3A6IDkwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAzMHB4O1xyXG4gICAgd2lkdGg6IDQwMHB4O1xyXG4gIH1cclxuICAudGV4dGJveHN7XHJcbiAgICBib3JkZXItY29sb3I6ICNBRUQ2RjE7XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogN3B4O1xyXG4gICAgYm94LXNoYWRvdzogMjBweDtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgd2lkdGg6IDkwJTtcclxuICAgIGhlaWdodDogNXB4O1xyXG4gIH1cclxuICBcclxuICBpbnB1dC5uZy1pbnZhbGlkLm5nLXRvdWNoZWR7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCByZWQ7XHJcbiAgfVxyXG4gIHNtYWxse1xyXG4gICAgY29sb3I6IHJlZDtcclxuICB9XHJcbiAgI2J0bjF7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibHVlO1xyXG4gIH1cclxuICBcclxuICBib2R5e1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gIH1cclxuICAuYWxlcnR7XHJcbiAgICBtYXJnaW4tdG9wOiA1MHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDM1MHB4O1xyXG4gICAgd2lkdGg6IDUwMHB4O1xyXG4gICAgaGVpZ2h0OiAxMDBweDtcclxuICAgIHBhZGRpbmc6IDkwcHgsMHB4OyBcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB9XHJcbiAgI2J0bjJ7XHJcbiAgICBtYXJnaW4tbGVmdDogMzUwcHg7XHJcbiAgICBcclxuICBcclxuICB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r11","LoginComponent","constructor","authService","storageService","router","username","password","ngOnInit","getToken","isLoggedIn","roles","getUser","onLogin","login","userlogin","subscribe","data","saveToken","accessToken","saveUser","isLoginFailed","reloadPage","err","alert","errorMessage","error","message","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\nikhith\\Documents\\CaseStudyFrontEnd\\Shopping-Cart\\src\\app\\login\\login.component.html","C:\\Users\\nikhith\\Documents\\CaseStudyFrontEnd\\Shopping-Cart\\src\\app\\login\\login.component.ts"],"sourcesContent":["  \n  <body>\n    <div>\n      <form  \n      *ngIf=\"!isLoggedIn\"\n      name=\"form\"\n      (ngSubmit)=\"f.form.valid && onLogin()\"\n      #f=\"ngForm\"\n      novalidate\n      >\n        <h2><i class=\"fa fa-user icon\">&nbsp;</i> Login Form</h2>\n        <div class=\"input-icons\">\n          <i class=\"fa fa-user icon\">&nbsp;</i>\n        <label for=\"username\">UserName <small>*</small></label>\n        <input type=\"text\" \n        name=\"username\" \n        class=\"textboxs \"\n        id=\"username\" \n        placeholder=\"Enter your name\"\n        [(ngModel)]=\"userlogin.username\"\n        required\n        pattern=\"[a-zA-Z][a-zA-Z ]+\"\n        #username=\"ngModel\"\n        [ngClass]=\"{ 'is-invalid': f.submitted && username.errors }\">\n  \n        <div *ngIf=\"username.errors && f.submitted\" class=\"invalid-feedback\">\n        <!-- <div class=\"alert alert-danger\"\n        role=\"alert\"> -->\n       <!-- <div *ngIf=\"username.errors && f.submitted\" class=\"invalid-feedback\">* Username is required</div>  -->\n       <div *ngIf=\"username.errors['required']\">* User Name is required</div>\n       <div *ngIf=\"username.errors['pattern']\">* User Name must be in Alphabets</div>\n      </div>\n      <!-- </div> -->\n      </div><br>\n  \n      <div class=\"input-icons\">\n        <i class=\"fa fa-lock icon\">&nbsp;</i>\n        <label for=\"password\">Password <small>*</small></label>\n        <input type=\"password\"\n        class=\"textboxs\"\n        id=\"password\"\n        name=\"password\"\n        placeholder=\"Enter your password\"\n        [(ngModel)]=\"userlogin.password\"\n        required\n        minlength=\"6\"\n        #password=\"ngModel\"\n        [ngClass]=\"{ 'is-invalid': f.submitted && password.errors }\">\n\n          <div *ngIf=\"password.errors && f.submitted\" class=\"invalid-feedback\">\n            <div *ngIf=\"password.errors['required']\">* Password is required</div>\n            <div *ngIf=\"password.errors['minlength']\">* Password must be at least 6 characters</div>\n          </div>\n  \n      </div><br>\n      <br>\n      <div>\n        <button  class=\"btn btn-success\" id=\"btn1\" type=\"submit\">Login</button>\n      </div>  \n\n      </form>\n    </div>\n    <div class=\"alert alert-success\" *ngIf=\"isLoggedIn\" >\n        Logged in Successful !  \n    </div>  \n      \n      \n  </body>","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../_services/auth.service';\nimport { StorageService } from '../_services/storage.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  constructor(private authService:AuthService,private storageService: StorageService,\n    private router:Router) { }\n  \n  ngOnInit(): void {\n    if (this.storageService.getToken()) {\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n    }\n  }\n  userlogin:any = {\n     username:'',\n     password:''\n    };\n  isLoggedIn = false;\n  isLoginFailed = false;\n  errorMessage = '';\n  roles: string[] = [];\n\n//      onLogin(){\n//       this.authService.login(this.userlogin).subscribe(data=>{\n//         console.log(data);\n//         this.router.navigate(['product']);\n//       })\n//     }\n   \n// }\n\nonLogin(){\n  \n  this.authService.login(this.userlogin).subscribe(                        //(username, password).subscribe({\n    data => {\n      this.storageService.saveToken(data.accessToken);\n      this.storageService.saveUser(data);\n\n      this.isLoginFailed=false;\n      this.isLoggedIn=true;\n      \n      this.roles=this.storageService.getUser().roles;\n      this.reloadPage();\n      \n    },\n    err=>{\n      alert('Login Failed,Please provide valid credentials');\n      this.errorMessage=err.error.message;\n      this.isLoginFailed=true;\n      \n    }\n  );\n}\n\nreloadPage(): void {\n  window.location.reload();\n}\n\n}\n\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}